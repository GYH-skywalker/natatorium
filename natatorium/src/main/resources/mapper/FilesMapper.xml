<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.natatorium.mapper.FilesMapper">

    <resultMap id="fileResultMap" type="com.example.natatorium.entity.Files">
            <id property="id" column="id" jdbcType="INTEGER"/>
            <result property="uuid" column="uuid" jdbcType="VARCHAR"/>
            <result property="fullName" column="full_name" jdbcType="VARCHAR"/>
            <result property="type" column="type" jdbcType="VARCHAR"/>
            <result property="size" column="size" jdbcType="DOUBLE"/>
            <result property="identificationId" column="identification_id" jdbcType="INTEGER"/>
            <result property="enable" column="enable" jdbcType="TINYINT"/>
            <result property="isDel" column="is_del" jdbcType="TINYINT"/>
            <result property="createTime" column="create_time" jdbcType="TIMESTAMP"/>
            <association property="fileIdentification" javaType="com.example.natatorium.entity.FileIdentification">
                <id property="id" column="id" jdbcType="INTEGER" />
                <result property="fileMd5" column="file_md5" jdbcType="VARCHAR"/>
                <result property="fileUrl" column="file_url" jdbcType="VARCHAR"/>
            </association>
    </resultMap>
    <select id="findPathAndName" resultMap="fileResultMap" parameterType="string">
        select f.full_name,fi.file_url
        from files f
        left join file_identification fi on f.identification_id = fi.id
        where f.uuid = #{uuid}
    </select>
    <sql id="Base_Column_List">
        id,uuid,full_name,
        type,size,identification_id,
        enable,is_del,create_time
    </sql>

</mapper>
